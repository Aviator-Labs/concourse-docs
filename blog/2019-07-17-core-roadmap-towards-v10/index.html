
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aviator-labs.github.io/concourse-docs/blog/2019-07-17-core-roadmap-towards-v10/">
      
      
        <link rel="prev" href="../2019-07-02-designing-a-dashboard-for-concourse/">
      
      
        <link rel="next" href="../2019-08-30-concourse-mid-year-update/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Core roadmap: towards v10 - Concourse Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#table-of-contents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Concourse Docs" class="md-header__button md-logo" aria-label="Concourse Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Concourse Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core roadmap: towards v10
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Aviator-Labs/concourse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Aviator-Labs/concourse-docs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Concourse

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../docs/" class="md-tabs__link">
          
  
  
    
  
  Docs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../project/" class="md-tabs__link">
        
  
  
    
  
  Project

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../ecosystem/" class="md-tabs__link">
        
  
  
    
  
  Ecosystem

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../support/" class="md-tabs__link">
        
  
  
    
  
  Support

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Concourse Docs" class="md-nav__button md-logo" aria-label="Concourse Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Concourse Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Aviator-Labs/concourse-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Aviator-Labs/concourse-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concourse
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../docs/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Docs
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../examples/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ecosystem
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../archive/2025/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../category/design/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-is-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      Where is 'spaces'?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-are-we-now" class="md-nav__link">
    <span class="md-ellipsis">
      Where are we now?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Where are we now?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-3602-a-new-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #3602: a new algorithm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-413-build-re-triggering" class="md-nav__link">
    <span class="md-ellipsis">
      Issue #413: build re-triggering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-are-we-going" class="md-nav__link">
    <span class="md-ellipsis">
      Where are we going?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Where are we going?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rfc-24-resources-v2" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #24: resources v2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-26-artifact-resources" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #26: artifact resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-31-set_pipeline-step" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #31: set_pipeline step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-32-projects" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #32: projects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-33-archiving-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #33: archiving pipelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-34-instanced-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #34: instanced pipelines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-29-spatial-resources" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #29: spatial resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-27-trigger-resources" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #27: trigger resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rfc-28-notification-resources" class="md-nav__link">
    <span class="md-ellipsis">
      RFC #28: notification resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-comes-after-all-this" class="md-nav__link">
    <span class="md-ellipsis">
      What comes after all this?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What comes after all this?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thanks" class="md-nav__link">
    <span class="md-ellipsis">
      Thanks!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg>
                        <time datetime="2019-07-17 00:00:00+00:00" class="md-ellipsis">July 17, 2019</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../category/roadmap/">roadmap</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"/></svg>
                          <span class="md-ellipsis">
                            
                              15 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  



  
  


<p><em>A long-term roadmap for the core design of <a href="../../">Concourse</a>, a general-purpose CI/CD tool.</em></p>
<!-- more -->

<p><em><a href="https://vito.github.io/slides/v10.html">Accompanying slides</a>. Recommended
viewing: <a href="https://www.youtube.com/watch?v=2ot9eV9DybI">episode 1 of Yu-Gi-Oh</a>.</em></p>
<p>Concourse's design philosophy is to be expressive, versatile, and safe while limited to a handful of simple, proven
concepts. The design of these concepts should make good practices feel intuitive and bad practices feel uncomfortable.</p>
<p>Coming up with these designs can be very challenging. There are many different workflows and patterns across the
software industry, and they each have to be deeply understood in order to know what the good and bad practices are.</p>
<p>This post provides a bit of insight into what we've been up to with Concourse's core design - chiefly regarding '
spaces', which has become a bit of a white whale on our roadmap.</p>
<p>There are a lot of words here - sorry! If you just want to skim, I've added a single-paragraph summary under each
roadmap entry.</p>
<p>Each roadmap entry corresponds to an RFC or an issue, linked in their header. If you want to get involved in our design
process or just provide feedback, please check them out and submit a PR review! (Thanks!)</p>
<h2 id="table-of-contents">Table of contents</h2>
<ol>
<li><a href="#where-is-spaces">Where is 'spaces'?</a></li>
<li>
<p><a href="#where-are-we-now">Where are we now?</a></p>
</li>
<li>
<p><a href="#issue-3602-a-new-algorithm">Issue #3602: a new algorithm</a></p>
</li>
<li>
<p><a href="#issue-413-build-re-triggering">Issue #413: build re-triggering</a></p>
</li>
<li>
<p><a href="#where-are-we-going">Where are we going?</a></p>
</li>
<li>
<p><a href="#rfc-24-resources-v2">RFC #24: resources v2</a></p>
</li>
<li><a href="#rfc-26-artifact-resources">RFC #26: artifact resources</a></li>
<li><a href="#rfc-31-set_pipeline-step">RFC #31: <code>set_pipeline</code> step</a></li>
<li><a href="#rfc-32-projects">RFC #32: projects</a></li>
<li><a href="#rfc-33-archiving-pipelines">RFC #33: archiving pipelines</a></li>
<li><a href="#rfc-34-instanced-pipelines">RFC #34: instanced pipelines</a></li>
<li><a href="#rfc-29-spatial-resources">RFC #29: spatial resources</a></li>
<li><a href="#rfc-27-trigger-resources">RFC #27: trigger resources</a></li>
<li>
<p><a href="#rfc-28-notification-resources">RFC #28: notification resources</a></p>
</li>
<li>
<p><a href="#what-comes-after-all-this">What comes after all this?</a></p>
</li>
<li><a href="#thanks">Thanks!</a></li>
</ol>
<h1 id="where-is-spaces">Where is 'spaces'?</h1>
<p>For those of you not familiar with <a href="https://github.com/concourse/concourse/issues/1707">spaces</a>, it was a big ol'
feature that enabled the following workflows:</p>
<ul>
<li>Dynamically running against things like branches/pull requests, which change over time (i.e. commits to a branch)
  <em>and</em> space (i.e. the set of branches themselves). Hence the name 'spaces.'</li>
<li>Fanning in using <code>passed</code> constraints across spaces. This is currently impossible to do with separate pipelines,
  because pipelines can't reference each other's resources.</li>
<li>Automatically cleaning up spaces for closed PRs, etc. This is annoying to automate and requires keeping track of
  state.</li>
</ul>
<p>These workflows still make sense, so why is 'spaces' dead?</p>
<p>Well, I approached it the wrong way. To me, the idea of resources tracking change over time and space felt pretty solid
from a theoretical standpoint. In hindsight, maybe it just sounded cool.</p>
<p>I had no reservations baking 'spaces' in to every layer of the stack - it would add more depth to all the existing
ideas. Everything was going to change: the resource interface, the web UI, how jobs work... It was all so exciting!</p>
<p>But as time went on it became terrifying. It was a double-or-nothing bet. Either 'spaces' made sense everywhere, or '
spaces' didn't make sense at all. I tried to carve out work that could be done before fully committing to spaces, but it
didn't make the monolithic feature any less monolithic.</p>
<p>{{&lt; image src="/images/2019/07/scaredy-cat-2.gif" alt="me vs the space dragon" width="25%" &gt;}}</p>
<h1 id="where-are-we-now">Where are we now?</h1>
<p>First off, I want to give a quick update on a couple of big things that you can expect in v6.0:</p>
<h2 id="issue-3602-a-new-algorithm"><a href="https://github.com/concourse/concourse/issues/3602">Issue #3602</a>: a new algorithm</h2>
<p><em>We are re-designing the algorithm used for determining the candidate input versions for a job. The new approach will
rely less on brute force and will perform better with large installations.</em></p>
<p>This new algorithm fixes long-standing architectural issues with the old one, which loaded each pipeline's entire build
and resource version history into memory and determined valid candidates using brute force.</p>
<p>The key difference between the old and new algorithm is how <code>passed</code> constraints are implemented, specifically when
multiple inputs depend on the same job:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">passed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">foo-unit</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">integration</span><span class="p p-Indicator">]</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">passed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">bar-unit</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">integration</span><span class="p p-Indicator">]</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">baz</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="nt">passed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">integration</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p>In Concourse, this means "give me versions of <code>foo</code>, <code>bar</code>, and <code>baz</code> that have passed through <code>integration</code> <em>together
in the same build</em>, with the same version of <code>foo</code> having passed <code>foo-unit</code> and the same version of <code>bar</code> having passed
<code>bar-unit</code>."</p>
<p>How does this work? Well, it's hard to describe either algorithm succinctly, but I'll try:</p>
<ul>
<li>The old algorithm goes through resource versions, newest first, and checks whether each version satisfies the input's
  own <code>passed</code> constraints. Next it checks that any other already-chosen input versions which mention the same job in
  <em>their</em> <code>passed</code> constraints also came from the same build, recursing and walking through versions until everything is
  satisfied. This process is brute-force, an uses a lot of CPU.</li>
<li>The new algorithm instead loops over <em>build output version sets</em> via the jobs listed in each <code>passed</code> constraint,
  assigning all the relevant versions for a given build at once as long as the versions match the other already-chosen
  versions assigned via builds of prior jobs in the <code>passed</code> constraint.</li>
</ul>
<p>This new approach really simplifies things because the versions are <em>inherently</em> coming from the same build. Now that we
don't have to do the extra cross-referencing, the new flow can just make a handful of cheap database queries instead of
having to load the whole pipeline's dataset into memory.</p>
<p>We've been testing the old and new algorithm in two separate environments, each at the scale of 1,000 jobs with varying
<code>passed</code> constraints and a sprinkle of <code>version: every</code> across four <code>web</code> nodes.</p>
<ul>
<li>The old algorithm starts off very fast but grows slower and slower as the pipeline dataset grows, eventually
  exhausting the <code>web</code> nodes of RAM and swap.</li>
<li>The new algorithm starts off slightly slower than the old one - it's hard to beat an in-memory dataset - but it stays
  stable, uses less CPU, and does not leak memory.</li>
</ul>
<p>We're making a few final touches as we to get as much performance out of the new algorithm as possible, since we don't
tend to touch it often. Once we're finished, we'll jump straight to...:</p>
<h2 id="issue-413-build-re-triggering"><a href="https://github.com/concourse/concourse/issues/413">Issue #413</a>: build re-triggering</h2>
<p><em>The new algorithm changes the behavior for today's pinning-based flow for re-triggering a build, so we're going to
implement proper support for build re-triggering and ship these two features together in v6.0.</em></p>
<p>Right now the only way to "re-trigger" a build is to pin each of the job's upstream resources to the version from the
build, trigger a new build, and go back and un-pin them all. It's pretty cumbersome and error-prone.</p>
<p>It also kind of breaks with the new algorithm. Now that the new algorithm is based on <em>build output sets</em> and not
version history, once the new build succeeds its older versions will end up being the first set attempted for that job,
potentially propagating them to downstream jobs.</p>
<p>That's not what I would expect from a <em>re-trigger</em>. I would expect a re-trigger to act "in-place," while preserving the
logs of the original failure for posterity.</p>
<p>To avoid this surprising change in behaviour, we're going to implement build re-triggering properly and stop abusing the
version pinning feature, which was originally designed for temporarily pinning a broken upstream dependency to a "known
good" one.</p>
<p>Build re-triggering will be implemented in a way that preserves the order of the builds that the algorithm will go over.
If the re-triggered build succeeds, its set of outputs will be available to downstream jobs based on the original
build's order.</p>
<p>Another benefit to implementing re-triggering soon is that folks using a pull request resource will have a much easier
time re-triggering failed pull requests, without having to wait on the rest of the roadmap (i.e. 'spaces').</p>
<h1 id="where-are-we-going">Where are we going?</h1>
<p>So, going back to the 'spaces' initiative. The pieces really started to fall into place over the past few months, and I
think I've arrived at a roadmap that accomplishes all of the goals of 'spaces' but in a significantly more Concourse-y
way.</p>
<p>Instead of one monolithic feature, I have a bunch of smaller features to propose that are independently valuable and can
be delivered in any order. As we complete them, a bigger picture will start to take shape.</p>
<p>Let's jump right in!</p>
<h2 id="rfc-24-resources-v2"><a href="https://github.com/concourse/rfcs/pull/24">RFC #24</a>: resources v2</h2>
<p><em>Resources v2 is the first major revision of the resource interface since Concourse's inception. It's a step to take
very carefully. I think we're finally ready to go.</em></p>
<p>**UPDATE: Just kidding! This proposal has been superceded by something even more
general: <a href="../2019-10-15-re-inventing-resource-types/">Prototypes</a>! (<a href="https://github.com/concourse/rfcs/blob/master/037-prototypes/proposal.md">RFC #37</a>)
**</p>
<p>The v2 interface brings long-awaited polish to the interface: it renames <code>in</code> and <code>out</code> to <code>get</code> and <code>put</code> to match
their step names, introduces a <code>delete</code> action, standardises TLS configuration, and revises terminology so as to not be
coupled to the 'versioned artifacts' use case.</p>
<p>The latest proposal for Resources v2, <a href="https://github.com/concourse/rfcs/pull/24">RFC #24</a>, is a lot
like <a href="https://github.com/concourse/rfcs/pull/1">RFC #1</a> but with one big difference: 'spaces' is no longer a
foundational piece of the interface. Instead, RFC #24 proposes that we generalize and simplify the interface to an
extent that it can be used for various pipeline workflows, not just versioning artifacts.</p>
<p>The new direction is to leverage composition between resources and pipelines via <em>config fragments</em>, which can be passed
from one resource to another or used for <code>((vars))</code> in a pipeline template. 'Config fragments' replace 'versions' in the
interface, and are used as versions for the 'versioned artifacts' flow (today's primary use of resources).</p>
<p>By generalizing the resource concept we set the stage for proper pipeline-level support for notifications (e.g. Slack
alerts, GitHub commit status), trigger-only resources (e.g. <code>time</code>), and spatial resources (e.g. branches, pull
requests) without tying each use case into the interface itself.</p>
<p>Now that 'spaces' is gone from the interface, the actual change in the interface protocol is somewhat cosmetic. As a
result, Concourse pipelines will be able to use v1 and v2 resources side-by-side for all the same functionality. This
way we can move forward with pipeline-level resource features without fragmenting the resource ecosystem!</p>
<h2 id="rfc-26-artifact-resources"><a href="https://github.com/concourse/rfcs/pull/26">RFC #26</a>: artifact resources</h2>
<p><em>Artifact resources are an interpretation of the generic resource interface that maps to today's usage of the resource
interface.</em></p>
<p><strong>UPDATE: this is now <a href="https://github.com/concourse/rfcs/blob/master/038-resource-prototypes/proposal.md">RFC #38</a>, "
Resource Prototypes"</strong></p>
<p>Artifact resources use config fragments as <em>versions</em>, modeling change to an external entity over time. This should
sound familiar to anyone using Concourse today: they're the sole use case that Concourse resources were originally
designed around.</p>
<p>The 'artifact resources' proposal clarifies that this is now just <em>one</em> use case for the general resource interface, and
outlines a few long-awaited features:</p>
<ul>
<li>Versions can be deleted using the <code>delete</code> action in the resource interface.</li>
<li>The <code>put</code> action can emit multiple versions. Each will be recorded as an output of the build.</li>
<li>The automatic <code>get</code> after the <code>put</code> step will be made opt-in. (Huzzah!)</li>
</ul>
<p>The automatic <code>get</code> after each <code>put</code> is something that has confused and occasionally frustrated users, but we didn't
want to break backwards compatibility and we didn't want users to have to 'opt out' (that's too
many <a href="https://github.com/concourse/concourse/wiki/Anti-Patterns#knobs">knobs</a> to turn).</p>
<p>This RFC will provide a backwards-compatible transition path to artifact resources. Check
out <a href="https://github.com/concourse/rfcs/pull/26">RFC #26</a> for more details!</p>
<h2 id="rfc-31-set_pipeline-step"><a href="https://github.com/concourse/rfcs/pull/31">RFC #31</a>: <code>set_pipeline</code> step</h2>
<p><em>The first step on our journey towards 'spaces' is to introduce a simple, but critical piece of the puzzle:
a <code>set_pipeline</code> step.</em></p>
<p>The <code>set_pipeline</code> step is used like so:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bootstrap</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">trigger</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">set_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">concourse</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci/pipelines/concourse.yml</span>
</span></code></pre></div>
<p>This job will configure a <code>concourse</code> pipeline within the job's team. The pipeline will be automatically unpaused, and
no authentication is required.</p>
<p>The first thing this lets us do is deprecate the <code>concourse-pipeline</code> resource, which has two pretty fundamental
problems:</p>
<ul>
<li>Having to configure auth is really awkward - you have to set up a local user and give the resource the keys to the
  kingdom.</li>
<li>Keeping the version of <code>fly</code> within the resource in sync with your own Concourse's version is a bit clunky.</li>
</ul>
<p>With the <code>set_pipeline</code> step, both of these problems immediately go away and pipelines start to feel a more first-class
rather than just being the tip of the abstraction iceberg.</p>
<h2 id="rfc-32-projects"><a href="https://github.com/concourse/rfcs/pull/32">RFC #32</a>: projects</h2>
<p>Ok, I promised to provide a tl;dr for each roadmap entry, but projects can't really be summed up that easily. This is
the most impactful feature on this roadmap.</p>
<ul>
<li><em>A "project" is a new concept bootstrapped by two existing ones: a <a href="https://concourse-ci.org/resources.html">resource</a>
  from which to continuously load the project's config, which specifies
  a <a href="https://concourse-ci.org/steps.html">build plan</a> to execute whenever the project resource changes.</em></li>
<li><em>Projects act as a namespace for pipelines, and provide a long-requested workflow for automating their configuration.
  As the roadmap goes on, this workflow becomes more and more powerful.</em></li>
<li><em>Projects allow you to define project-wide resources which let you clean up duplicate definitions across your
  pipelines and support cross-pipeline <code>passed</code> constraints.</em></li>
<li><em>Projects also define project-wide tasks, which remove the need to thread a resource through all your jobs just to
  have the task configs to execute, and finally gives meaning to task names (the <code>x</code> in <code>task: x</code>).</em></li>
</ul>
<p>A project's build plan can be used for anything you want. Small projects could use the build plan to run tests and/or
perform various steps in a single build - a workflow more familiar to users of other CI systems:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">get</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">booklit</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">trigger</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unit</span>
</span></code></pre></div>
<p>Larger projects could use the build plan to execute <code>set_pipeline</code> steps. Concourse has long encouraged users to keep
their pipelines under source control, but it never enforced it: <code>fly set-pipeline</code> was still a manual operation, and
users would often forget to check in their changes. Projects will fix that:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">set_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">booklit</span>
</span></code></pre></div>
<p>Small projects may start without pipelines and start using pipelines as they grow. Our original slogan, 'CI that scales
with your project,' is now pretty literal! The hope is that by introducing build plans without requiring knowledge of
pipelines and jobs, we'll have made Concourse's learning curve more gradual and made Concourse feel less overkill for
side-projects.</p>
<p>This feature will have far-reaching implications for Concourse, so it won't be sneaking in quietly. I've
opened <a href="https://github.com/concourse/rfcs/pull/32">RFC #32</a> and would really appreciate feedback!</p>
<h2 id="rfc-33-archiving-pipelines"><a href="https://github.com/concourse/rfcs/pull/33">RFC #33</a>: archiving pipelines</h2>
<p><em>Archiving pipelines is a way to soft-delete a pipeline while still being able to peruse the build history for a
pipeline you no longer want.</em></p>
<p>Well, after that bombshell this one's pretty easy to explain. Let's take a look at our own Concourse team's pipelines:</p>
<p>{{&lt; image src="/images/2019/07/Screenshot-from-2019-07-16-11-49-33.png" width="100%" &gt;}}</p>
<p>Look at all that cruft! So many old, paused or bit-rotting pipelines which I really don't care about anymore but don't
really have the heart to delete. That <code>old-concourse</code> pipeline served us well for years - it has sentimental value. In
some cases you may also want to keep the history around for auditing purposes.</p>
<p>Archiving pipelines will allow you to humanely retire a pipeline in a way that gets it out of your way while still
allowing you to peruse the build history should you ever need to. Archived pipelines are no longer active and will allow
you to re-use their name without bringing the old pipeline back.</p>
<p>There's already an open pull request for this: <a href="https://github.com/concourse/concourse/issues/2518">#2518</a> - shout-out
to <a href="https://github.com/tkellen">@tkellen</a>! The ball has been in our court for a while to figure out the UI/UX, so we're
just going to submit a new RFC and work out all the details.</p>
<h2 id="rfc-34-instanced-pipelines"><a href="https://github.com/concourse/rfcs/pull/34">RFC #34</a>: instanced pipelines</h2>
<p><em>Instanced pipelines group together pipelines which share a common template configured with different <code>((vars))</code>. They
provide a simple two-level hierarchy and automatic archiving of instances which are no longer needed.</em></p>
<p>Instanced pipelines are an important piece of the 'spaces' puzzle: it's how users will navigate through their spatial
pipelines, and it's what keeps no-longer-relevant spaces for e.g. merged PRs and deleted branches from piling up
forever.</p>
<p>Pipeline instances are created using the <code>set_pipeline</code> step like so:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">set_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branch</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">instance_vars</span><span class="p">:</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature/projects</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">set_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branch</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="nt">instance_vars</span><span class="p">:</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature/new-algorithm</span>
</span></code></pre></div>
<p>At the end of a build which uses <code>set_pipeline</code>, all instances of the named pipelines which were not configured by the
build will be automatically archived.</p>
<p>Check out <a href="https://github.com/concourse/rfcs/pull/34">RFC #34</a> for more details!</p>
<h2 id="rfc-29-spatial-resources"><a href="https://github.com/concourse/rfcs/pull/29">RFC #29</a>: spatial resources</h2>
<p><em>Spatial resources are resources whose <code>check</code> monitors spatial change, not change over time. Two common examples are
the set of branches or open pull requests for a repo. The <code>across</code> step allows a build to process each 'space' and
trigger on changes to the set.</em></p>
<p><strong>UPDATE: the syntax for this step has since been tweaked so that multi-var matrices don't require nesting <code>across</code>
steps.</strong></p>
<p>When used with the new <code>across</code> step, the &nbsp;<code>set_pipeline</code> step, and instanced pipelines, this enables dynamic
pipeline configuration across spatial change.</p>
<p>The final piece of the puzzle for 'spaces' is the addition of an <code>across</code> step. This step points to a resource and has a
plan which will execute for <em>every config fragment</em> returned by the resource's <code>check</code>, all within one build.</p>
<p>Let's first look at a simple use case, which is to execute a task across many variants:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1"># ...</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">across</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">supported-go-versions</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="nt">do</span><span class="p">:</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unit</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go</span>
</span></code></pre></div>
<p>In this case, imagine we have a <code>supported-go-versions</code> resource whose <code>check</code> returns a config fragment for each tag
and digest based on a pre-configured list of supported tags (e.g. <code>1.10</code>, <code>1.11</code>, <code>1.12</code>), and whose <code>in</code>/<code>get</code> fetches
the image.</p>
<p>When nested, the <code>across</code> step enables dynamic build matrices:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># ...</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">across</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">supported-go-versions</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">do</span><span class="p">:</span><span class="w"> </span><span class="c1"># needed so we can define another &#39;across&#39;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">across</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other-things</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">some-input</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unit</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go</span>
</span></code></pre></div>
<p>When used with <code>set_pipeline</code> and instanced pipelines, it enables dynamic <em>pipeline</em> matrices:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">across</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo-branches</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo-branch</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nt">set_pipeline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">branch</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span><span class="nt">instance_vars</span><span class="p">:</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nt">branch_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">((repo-branch.name))</span>
</span></code></pre></div>
<p>(Assuming we provide the ability to access fields of an artifact with <code>((vars))</code>.)</p>
<h2 id="rfc-27-trigger-resources"><a href="https://github.com/concourse/rfcs/pull/27">RFC #27</a>: trigger resources</h2>
<p><em>Trigger resources allow jobs to specify parameters that can trigger new builds but don't have anything to fetch - they
just propagate config fragments to the build.</em></p>
<p><strong>UPDATE: this has turned into a <code>get_var</code> step, rather than a <code>param</code> step</strong></p>
<p>This is also a relatively simple feature, but it will improve today's usage of the <code>time</code> resource by having per-job
trigger semantics rather than having all jobs downstream of one <code>time</code> resource leading to a thundering herd of builds
hitting your workers all at once.</p>
<p>Rough sketch:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smoke-test</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10m</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="nt">trigger</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<p>Semantically, <code>param</code> is similar to <code>get</code> but with one key difference: there is no central version history. Rather than
being used as an <em>artifact</em>, the resource is used solely for its <em>config fragments.</em> Concourse will <code>check</code> against the
job's last used config fragment for the trigger resource, <code>10m</code>, and if a different fragment is returned the job will
trigger with the new one.</p>
<p>This skips the <code>get</code>, eliminates the thundering herd issue (because all jobs have their own interval), and could enable
an interesting pattern for manually-parameterized builds: just write a resource type that can fetch user-provided config
fragments from some external source (i.e. a repo).</p>
<p>Here's one idea of what that may look like, where the config fragments returned by param are somehow usable with
<code>((vars))</code> syntax in subsequent steps:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">plan</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">environment</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smoke-test</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="nt">vars</span><span class="p">:</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">((environment.name))</span>
</span></code></pre></div>
<p>Another interesting use case would be to use it as a <code>instance_fragment</code> with the <code>set_pipeline</code> step.</p>
<p>This idea is pretty half-baked - I've been mainly focusing on the 'spatial resources' idea. Follow along in
the <a href="https://github.com/concourse/rfcs/pull/27">RFC #27</a> and help the idea develop!</p>
<h2 id="rfc-28-notification-resources"><a href="https://github.com/concourse/rfcs/pull/28">RFC #28</a>: notification resources</h2>
<p><em>Notification resources will allow you to monitor the flow of a resource through your pipeline and emit build status
notifications (e.g. Slack alerts, GitHub commit status) without having to sprinkle <code>put</code> steps all over your pipeline.</em></p>
<p>Have you ever wanted to reflect your CI build status on your GitHub commits? Or send a Slack notification whenever the
build is fixed or broken?</p>
<p>If so, you're probably aware of how ugly it can make your pipelines, both in YAML and in the UI.</p>
<p>A simple pipeline quickly turns into a mess of boxes and lines:</p>
<p>{{&lt; image src="/images/2019/07/before-notifications-1.png" width="100%" &gt;}}
{{&lt; image src="/images/2019/07/after-notifications.png" alt="a simple pipeline before and after notifications were
added" width="100%" &gt;}}</p>
<p>Not only is it a lot of manual work to copy-paste those <code>on_success</code> and <code>on_failure</code> hooks, when you finally configure
it it really ruins the signal-to-noise ratio of the pipeline UI.</p>
<p>So, the plan for notification resources is to leverage <em>composition</em>, a pattern set forth in
the <a href="https://github.com/concourse/rfcs/pull/24">Resources v2 RFC (#24)</a>. Instead of annotating every single job, you
annotate a resource, and any time that resource is used in a build a notification will be fired, by executing the
notification resource's <code>put</code> step with the config fragment of the original resource (e.g. <code>ref: abcdef</code>) and the status
of the build.</p>
<p>This way you don't have to update all of your jobs, and notifications don't clutter up the pipeline UI. Neato!</p>
<p>This idea is <em>also</em> a bit half-baked - follow along in <a href="https://github.com/concourse/rfcs/pull/28">RFC #28</a> when you
have time!</p>
<h1 id="what-comes-after-all-this">What comes after all this?</h1>
<p>I dunno.</p>
<p>I have a lot of respect for software that is eventually considered 'done.' I would really like Concourse's core design
to achieve that someday.</p>
<p>We'll always have things to improve, whether it's through better efficiency, better UX, support for new underlying
technologies (Kubernetes, Nomad), or just making our codebase more accessible for contributors. But from a core design
standpoint, I think the most important thing is stability.</p>
<p>The software industry changes quickly. Hot new tools show up all the time and get replaced by newer and better tools. I
don't want our users to have to keep re-doing their CI stack just to keep up.</p>
<p>Concourse should insulate projects from the constant churn in the industry by providing a solid set of principles and
abstractions that hold true regardless of the underlying technology.</p>
<p>We will continue to listen to user feedback and improve Concourse. Our goal is for it to support good patterns and
prevent anti-patterns that we can identify in workflows across the industry. Thankfully patterns don't change as
frequently as tools do.</p>
<h2 id="thanks">Thanks!</h2>
<p>Everything I've outlined here comes from years of feedback through all of your GitHub issues, forum posts, and
conversations in Discord (or Slack for you OGs). I'm very thankful for those of you that have stuck around and helped us
understand your workflows, and I'm especially grateful for your patience.</p>
<p>For those of you who couldn't wait and ultimately had to switch tools, I hope we
accomplished <a href="https://github.com/concourse/docs/blob/dbf2dc1299be7c579012c2a8e8c21933890d21bb/what-and-why.scrbl#L14-L16">one of our original goals</a>,
and I hope to see you back in the future!</p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../2019-07-02-designing-a-dashboard-for-concourse/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Designing a Dashboard for Concourse">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Designing a Dashboard for Concourse
              </div>
            </div>
          </a>
        
        
          
          <a href="../2019-08-30-concourse-mid-year-update/" class="md-footer__link md-footer__link--next" aria-label="Next: Concourse Mid-year Update">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Concourse Mid-year Update
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.prune", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.top", "content.code.copy", "attr_list", "md_in_html", "pymdownx.blocks.caption", "navigation.footer"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>